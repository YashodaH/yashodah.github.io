"use strict";function formBuilderHelpersFn(a,b){var c={doCancel:!1};return b.events=formBuilderEventsFn(),c.attrString=function(a){var b=[];for(var d in a)a.hasOwnProperty(d)&&(d=c.safeAttr(d,a[d]),b.push(d.name+d.value));var e=b.join(" ");return e},c.hyphenCase=function(a){return a=a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()}),a.replace(/\s/g,"-").replace(/^-+/g,"")},c.camelCase=function(a){return a.replace(/-([a-z])/g,function(a,b){return a=a,b.toUpperCase()})},c.makeClassName=function(a){return a=a.replace(/[^\w\s\-]/gi,""),c.hyphenCase(a)},c.safeAttrName=function(a){var b={className:"class"};return b[a]||c.hyphenCase(a)},c.safeAttr=function(a,b){a=c.safeAttrName(a);var d=window.JSON.stringify(c.escapeAttr(b));return b=b?"="+d:"",{name:a,value:b}},c.mobileClass=function(){var a="";return function(b){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(b)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(b.substr(0,4)))&&(a=" fb-mobile")}(navigator.userAgent||navigator.vendor||window.opera),a},c.startMoving=function(a,b){a=a,b.item.show().addClass("moving"),c.startIndex=$("li",this).index(b.item)},c.stopMoving=function(a,b){a=a,b.item.removeClass("moving"),c.doCancel&&($(b.sender).sortable("cancel"),$(this).sortable("cancel")),c.save(),c.doCancel=!1},c.beforeStop=function(b,d){b=b;var e=document.getElementById(a.formID),f=e.children.length-1,g=[];c.stopIndex=d.placeholder.index()-1,!a.sortableControls&&d.item.parent().hasClass("frmb-control")&&g.push(!0),a.prepend&&g.push(0===c.stopIndex),a.append&&g.push(c.stopIndex+1===f),c.doCancel=g.some(function(a){return a===!0})},c.safename=function(a){return a.replace(/\s/g,"-").replace(/[^a-zA-Z0-9\-]/g,"").toLowerCase()},c.forceNumber=function(a){return a.replace(/[^0-9]/g,"")},c.initTooltip=function(a){var b=a.find(".tooltip");a.mouseenter(function(){b.outerWidth()>200&&b.addClass("max-width"),b.css("left",a.width()+14),b.stop(!0,!0).fadeIn("fast")}).mouseleave(function(){a.find(".tooltip").stop(!0,!0).fadeOut("fast")}),b.hide()},c.getTypes=function(a){return{type:a.attr("type"),subtype:$(".fld-subtype",a).val()}},c.trimObj=function(a){var b=[null,void 0,"",!1];for(var d in a)c.inArray(a[d],b)&&delete a[d];return a},c.escapeAttr=function(a){function b(a){return c[a]||a}var c={'"':"&quot;","&":"&amp;","<":"&lt;",">":"&gt;"};return"string"==typeof a?a.replace(/["&<>]/g,b):a},c.escapeAttrs=function(a){for(var b in a)a.hasOwnProperty(b)&&(a[b]=c.escapeAttr(a[b]));return a},c.xmlSave=function(a){var d=$(a).toXML(c);return window.JSON.stringify(d)!==window.JSON.stringify(b.formData)&&void(b.formData=d)},c.jsonSave=function(){a.notify.warning("json data not available yet")},c.save=function(){var d,e=c.getElement(),f=document.getElementById(a.formID),g={xml:c.xmlSave,json:c.jsonSave};return d=g[a.dataType](f),e&&(e.value=b.formData,window.jQuery?$(e).trigger("change"):e.onchange()),document.dispatchEvent(b.events.formSaved),d},c.getElement=function(){var d=!1;return b.element&&(d=b.element,d.id||c.makeId(d),d.onchange||(d.onchange=function(){a.notify.success(a.messages.formUpdated)})),d},c.incrementId=function(a){var b=a.lastIndexOf("-"),c=parseInt(a.substring(b+1))+1,d=a.substring(0,b);return d+"-"+c},c.makeId=function(){var a=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],b=(new Date).getTime();return a.tagName+"-"+b},c.updatePreview=function(a){var b=a.attr("class");if(-1===b.indexOf("ui-sortable-handle")){var d,e=$(a).attr("type"),f=$(".prev-holder",a),g={type:e};$('[class*="fld-"]',a).each(function(){var a=c.camelCase(this.name);g[a]="checkbox"===this.type?this.checked:this.value});var h=$(".btn-style",a).val();h&&(g.style=h),e.match(/(select|checkbox-group|radio-group)/)&&(g.values=[],g.multiple=$('[name="multiple"]',a).is(":checked"),$(".sortable-options li",a).each(function(){var a={};a.selected=$(".option-selected",this).is(":checked"),a.value=$(".option-value",this).val(),a.label=$(".option-label",this).val(),g.values.push(a)})),g=c.trimObj(g),g.className=c.classNames(a,g),$(".fld-className",a).val(g.className),a.data("fieldData",g),d=c.fieldPreview(g),f.html(d),$("input[toggle]",f).kcToggle()}},c.fieldPreview=function(b){var d,e="",f=(new Date).getTime();b=jQuery.extend({},b),b.type=b.subtype||b.type;var g=b.toggle?"toggle":"",h=c.attrString(b);switch(b.type){case"textarea":case"rich-text":var i=b.value||"";e="<textarea "+h+">"+i+"</textarea>";break;case"button":case"submit":e="<button "+h+">"+b.label+"</button>";break;case"select":var j="",k=b.multiple?"multiple":"";for(b.values.reverse(),b.placeholder&&(j+="<option disabled selected>"+b.placeholder+"</option>"),d=b.values.length-1;d>=0;d--){var l=b.values[d].selected&&!b.placeholder?"selected":"";j+='<option value="'+b.values[d].value+'" '+l+">"+b.values[d].label+"</option>"}e="<"+b.type+' class="'+b.className+'" '+k+">"+j+"</"+b.type+">";break;case"checkbox-group":case"radio-group":var m=b.type.replace("-group",""),n=m+"-"+f;for(b.values.reverse(),d=b.values.length-1;d>=0;d--){var o=b.values[d].selected?"checked":"",p=m+"-"+f+"-"+d;e+='<div><input type="'+m+'" class="'+b.className+'" name="'+n+'" id="'+p+'" value="'+b.values[d].value+'" '+o+'/><label for="'+p+'">'+b.values[d].label+"</label></div>"}if(b.enableOther){var q=n+"-other",r={id:q,name:n,className:b.className+" other-option",type:m,onclick:"otherOptionCallback('"+q+"')"},s=c.markup("input",null,r);window.otherOptionCallback=function(a){var b=document.getElementById(a),c=b.nextElementSibling,d=c.nextElementSibling;b.checked?(d.style.display="inline-block",c.style.display="none"):(d.style.display="none",c.style.display="inline-block")},e+="<div>"+s.outerHTML+'<label for="'+q+'">'+a.messages.other+'</label> <input type="text" id="'+q+'-value" style="display:none;" /></div>'}break;case"text":case"password":case"email":case"date":case"file":case"number":e="<input "+h+">";break;case"color":e='<input type="'+b.type+'" class="'+b.className+'"> '+a.messages.selectColor;break;case"hidden":case"checkbox":e='<input type="'+b.type+'" '+g+" >";break;case"autocomplete":e='<input class="ui-autocomplete-input '+b.className+'" autocomplete="on">';break;default:h=c.attrString(b),e="<"+b.type+" "+h+">"+b.label+"</"+b.type+">"}return e},c.updateMultipleSelect=function(){$(document.getElementById(a.formID)).on("change",'input[name="multiple"]',function(){var a=$(this).parents(".field-options:eq(0)").find(".sortable-options input.option-selected");this.checked?a.each(function(){$(this).prop("type","checkbox")}):a.each(function(){$(this).removeAttr("checked").prop("type","radio")})})},c.debounce=function(a){var b,c=arguments.length<=1||void 0===arguments[1]?250:arguments[1],d=!(arguments.length<=2||void 0===arguments[2])&&arguments[2];return function(){var e=this,f=arguments,g=function(){b=null,d||a.apply(e,f)},h=d&&!b;clearTimeout(b),b=setTimeout(g,c),h&&a.apply(e,f)}},c.htmlEncode=function(a){return $("<div/>").text(a).html()},c.htmlDecode=function(a){return $("<div/>").html(a).text()},c.validateForm=function(){var b=$(document.getElementById(a.formID)),c=[];$('input[name="label"], input[type="text"].option',b).each(function(){if(""===$(this).val()){var b=$(this).parents("li.form-field"),d=$(this);c.push({field:b,error:a.messages.labelEmpty,attribute:d})}}),c.length&&(alert("Error: "+c[0].error),$("html, body").animate({scrollTop:c[0].field.offset().top},1e3,function(){var a=$(".toggle-form",c[0].field).attr("id");$(".toggle-form",c[0].field).addClass("open").parent().next(".prev-holder").slideUp(250),$("#"+a+"-fld").slideDown(250,function(){c[0].attribute.addClass("error")})}))},c.disabledTT={className:"frmb-tt",add:function(b){var d=a.messages.fieldNonEditable;if(d){var e=c.markup("p",d,{className:c.disabledTT.className});b.append(e)}},remove:function(a){$(".frmb-tt",a).remove()}},c.classNames=function(b,d){var e=["checkbox","checkbox-group","radio-group"],f=["header","paragraph","button"],g=void 0;for(g=f.length-1;g>=0;g--)f=f.concat(a.messages.subtypes[f[g]]);e=e.concat(f);var h=d.type,i=d.style,j=b[0].querySelector(".fld-className").value,k=[].concat(j.split(" ")).reverse(),l={button:"btn",submit:"btn"},m=l[h];if(m){if(i){for(g=k.length-1;g>=0;g--){var n=new RegExp("(?:^|s)"+m+"-(.*?)(?:s|$)+","g"),o=k[g].match(n);o&&k.splice(g,1)}k.push(m+"-"+i)}k.push(m)}else c.inArray(h,e)||k.push("frm-control");return c.unique(k.reverse()).join(" ").trim()},c.markup=function(a){var b=arguments.length<=1||void 0===arguments[1]?"":arguments[1],d=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],e=void 0,f=document.createElement(a),g=function(a){return Array.isArray(a)?"array":"undefined"==typeof a?"undefined":_typeof(a)},h={string:function(a){f.innerHTML=a},object:function(a){return f.appendChild(a)},array:function(a){for(var b=0;b<a.length;b++)e=g(a[b]),h[e](a[b])}};for(var i in d)if(d.hasOwnProperty(i)&&d[i]){var j=c.safeAttrName(i);f.setAttribute(j,d[i])}return e=g(b),b&&h[e].call(this,b),f},c.closeConfirm=function(a,c){a=a||document.getElementsByClassName("form-builder-overlay")[0],c=c||document.getElementsByClassName("form-builder-dialog")[0],a.classList.remove("visible"),c.remove(),a.remove(),document.dispatchEvent(b.events.modalClosed)},c.editorLayout=function(a){var b={left:{stage:"pull-right",controls:"pull-left"},right:{stage:"pull-left",controls:"pull-right"}};return b[a]?b[a]:""},c.showOverlay=function(){var a=c.markup("div",null,{className:"form-builder-overlay"});return document.body.appendChild(a),a.classList.add("visible"),a.onclick=function(){c.closeConfirm(a)},a},c.confirm=function(b,d){var e=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],f=arguments.length<=3||void 0===arguments[3]?"":arguments[3],g=c.showOverlay(),h=c.markup("button",a.messages.yes,{className:"yes btn btn-success btn-sm"}),i=c.markup("button",a.messages.no,{className:"no btn btn-danger btn-sm"});i.onclick=function(){c.closeConfirm(g)},h.onclick=function(){d(),c.closeConfirm(g)};var j=c.markup("div",[i,h],{className:"button-wrap"});f="form-builder-dialog "+f;var k=c.markup("div",[b,j],{className:f});return e?k.classList.add("positioned"):(e={pageX:Math.max(document.documentElement.clientWidth,window.innerWidth||0)/2,pageY:Math.max(document.documentElement.clientHeight,window.innerHeight||0)/2},k.style.position="fixed"),k.style.left=e.pageX+"px",k.style.top=e.pageY+"px",document.body.appendChild(k),h.focus(),k},c.dialog=function(a){var d=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],e=arguments.length<=2||void 0===arguments[2]?"":arguments[2];c.showOverlay(),e="form-builder-dialog "+e;var f=c.markup("div",a,{className:e});return d?f.classList.add("positioned"):(d={pageX:Math.max(document.documentElement.clientWidth,window.innerWidth||0)/2,pageY:Math.max(document.documentElement.clientHeight,window.innerHeight||0)/2},f.style.position="fixed"),f.style.left=d.pageX+"px",f.style.top=d.pageY+"px",document.body.appendChild(f),-1!==e.indexOf("data-dialog")&&document.dispatchEvent(b.events.viewData),f},c.removeAllfields=function(){var b=document.getElementById(a.formID),d=b.querySelectorAll("li.form-field"),e=$(d),f=[];a.prepend&&f.push(!0),a.append&&f.push(!0),f.some(function(a){return a===!0})||b.parentElement.classList.add("empty"),b.classList.add("removing");var g=0;e.each(function(){g+=$(this).outerHeight()+3}),d[0].style.marginTop=-g+"px",setTimeout(function(){e.remove(),document.getElementById(a.formID).classList.remove("removing"),c.save()},500)},c.setFieldOrder=function(b){if(!a.sortableControls)return!1;var c={};b.children().each(function(a,b){c[a]=$(b).data("attrs").type}),window.sessionStorage&&window.sessionStorage.setItem("fieldOrder",window.JSON.stringify(c))},c.orderFields=function(b){var d=!1;window.sessionStorage&&(a.sortableControls?d=window.sessionStorage.getItem("fieldOrder"):window.sessionStorage.removeItem("fieldOrder")),d?(d=window.JSON.parse(d),d=Object.keys(d).map(function(a){return d[a]})):d=c.unique(a.controlOrder);for(var e=[],f=d.length-1;f>=0;f--){var g=b.filter(function(a){return a.attrs.type===d[f]})[0];e.push(g)}return e.filter(Boolean)},c.forEach=function(a,b,c){for(var d=0;d<a.length;d++)b.call(c,d,a[d])},c.inArray=function(a,b){return-1!==b.indexOf(a)},c.unique=function(a){return a.filter(function(a,b,c){return c.indexOf(a)===b})},c.closeAllEdit=function(a){var b=$("> li.editing",a),c=$(".toggle-form",a),d=$(".frm-holder",b);c.removeClass("open"),b.removeClass("editing"),d.hide(),$(".prev-holder",b).show()},c.toggleEdit=function(a){var b=document.getElementById(a),c=$(".toggle-form",b),d=$(".frm-holder",b);b.classList.toggle("editing"),c.toggleClass("open"),$(".prev-holder",b).slideToggle(250),d.slideToggle(250)},c.stickyControls=function(a,b){var c=$(b).parent(),d=a.parent(),e=c.width(),f=b.getBoundingClientRect();$(window).scroll(function(){var a=$(this).scrollTop();if(a>d.offset().top){var g={position:"fixed",width:e,top:0,bottom:"auto",right:"auto",left:f.left},h=c.offset(),i=d.offset(),j=h.top+c.height(),k=i.top+d.height();j>k&&h.top!==i.top&&c.css({position:"absolute",top:"auto",bottom:0,right:0,left:"auto"}),(k>j||j===k&&h.top>a)&&c.css(g)}else b.parentElement.removeAttribute("style")})},c}function formBuilderEventsFn(){var a={};return a.loaded=new Event("loaded"),a.viewData=new Event("viewData"),a.userDeclined=new Event("userDeclined"),a.modalClosed=new Event("modalClosed"),a.formSaved=new Event("formSaved"),a}function FormRenderFn(a,b){var c=this,d={destroyTemplate:!0,container:!1,dataType:"xml",formData:!1,label:{formRendered:"Form Rendered",noFormData:"No form data.",other:"Other",selectColor:"Select Color"},render:!0,notify:{error:function(a){return console.error(a)},success:function(a){return console.log(a)},warning:function(a){return console.warn(a)}}},e={},f=$.extend(!0,d,a);e.getElement=function(){return b.id||(b.id=e.makeId(b)),document.getElementById(b.id)},e.makeId=function(a){var b=(new Date).getTime();return a.tagName+"-"+b},!f.formData&&b&&(b=e.getElement(),f.formData=b.value),e.markup=function(a){var b=arguments.length<=1||void 0===arguments[1]?"":arguments[1],c=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],d=void 0,f=document.createElement(a),g=function(a){return Array.isArray(a)?"array":"undefined"==typeof a?"undefined":_typeof(a)},h={string:function(a){f.innerHTML=a},object:function(a){return f.appendChild(a)},array:function(a){for(var b=0;b<a.length;b++)d=g(a[b]),h[d](a[b])}};for(var i in c)if(c.hasOwnProperty(i)){var j=e.safeAttrName(i);f.setAttribute(j,c[i])}return d=g(b),b&&h[d].call(this,b),f},e.fieldRender=function(a){var b="",c="",d="",g=e.parseAttrs(a.attributes),h=g.label||"",i=g.description||"",j="",k=$("option",a);g.id=g.name,g.type=g.subtype||g.type,g.required&&(g.required=null,g["aria-required"]="true",j='<span class="required">*</span>'),"hidden"!==g.type&&(i&&(i='<span class="tooltip-element" tooltip="'+i+'">?</span>'),c='<label for="'+g.id+'">'+h+" "+j+" "+i+"</label>");var l=g.label;delete g.label,delete g.description;var m=e.attrString(g);switch(g.type){case"textarea":case"rich-text":delete g.type;var n=g.value||"";b=c+"<textarea "+m+">"+n+"</textarea>";break;case"select":g.type=g.type.replace("-group",""),k.length&&k.each(function(a,b){a=a;var c=e.parseAttrs(b.attributes),f=e.attrString(c);d+="<option "+f+">"+b.textContent+"</option>"}),b=c+"<select "+m+">"+d+"</select>";break;case"checkbox-group":case"radio-group":var o=!1;g.type=g.type.replace("-group",""),g.other&&(delete g.other,o=!0),k.length&&!function(){var a="checkbox"===g.type?g.name+"[]":g.name,b=void 0;if(k.each(function(c,f){var h=$.extend({},g,e.parseAttrs(f.attributes));h.selected&&(delete h.selected,h.checked=null),h.name=a,h.id=g.id+"-"+c,b=e.attrString(h),d+="<input "+b+' /> <label for="'+h.id+'">'+f.textContent+"</label><br>"}),o){var c={id:g.id+"-other",name:a,class:g.class+" other-option"};b=e.attrString($.extend({},g,c)),d+="<input "+b+' /> <label for="'+c.id+'">'+f.label.other+'</label> <input type="text" data-other-id="'+c.id+'" id="'+c.id+'-value" style="display:none;" />'}}(),b=c+'<div class="'+g.type+'-group">'+d+"</div>";break;case"text":case"password":case"email":case"number":case"file":case"hidden":case"date":case"autocomplete":b=c+" <input "+m+">";break;case"color":b=c+" <input "+m+"> "+f.label.selectColor;break;case"button":case"submit":b="<button "+m+">"+l+"</button>";break;case"checkbox":b="<input "+m+"> "+c,g.toggle&&setTimeout(function(){$(document.getElementById(g.id)).kcToggle()},100);break;default:b="<"+g.type+" "+m+">"+l+"</"+g.type+">"}if("hidden"!==g.type){var p=g.id?"form-group field-"+g.id:"";b=e.markup("div",b,{className:p})}else b=e.markup("input",null,g);return b},e.hyphenCase=function(a){return a=a.replace(/[^\w\s\-]/gi,""),a=a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()}),a.replace(/\s/g,"-").replace(/^-+/g,"")},e.attrString=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&(c=e.safeAttr(c,a[c]),b.push(c.name+c.value));return b.join(" ")},e.safeAttr=function(a,b){var c={className:"class"};return a=c[a]||a,b=!!b&&window.JSON.stringify(b),b=b?"="+b:"",{name:a,value:b}},e.safeAttrName=function(a){var b={className:"class"};return b[a]||e.hyphenCase(a)},e.parseAttrs=function(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[a[c].name]=a[c].value);return b},Element.prototype.appendFormFields=function(a){var b=this;a.reverse();for(var c=a.length-1;c>=0;c--)b.appendChild(a[c])},Element.prototype.emptyContainer=function(){for(var a=this;a.lastChild;)a.removeChild(a.lastChild)};var g=function(){for(var a=document.getElementsByClassName("other-option"),b=function(){var b=document.getElementById(a[c].id+"-value");a[c].onclick=function(){var a=this;this.checked?(b.style.display="inline-block",a.nextElementSibling.style.display="none",b.oninput=function(){a.value=this.value}):(b.style.display="none",a.nextElementSibling.style.display="inline-block",b.oninput=void 0)}},c=0;c<a.length;c++)b()},h=function(){g()},i=[],j=$.parseXML(f.formData),k=$("field",j);if(k.length)k.each(function(a,b){a=a,i.push(e.fieldRender(b))});else{var l=e.markup("div",f.label.noFormData,{className:"no-form-data"});i.push(l),f.notify.error(f.label.noFormData)}if(f.render){if(f.container){var m=e.markup("div",i,{className:"rendered-form"});f.container=f.container instanceof jQuery?f.container[0]:f.container,f.container.emptyContainer(),f.container.appendChild(m)}else if(b)if(b.parentElement.classList.contains("rendered-form"))b.parentElement.emptyContainer(),b.parentElement.appendFormFields(i);else{var n=e.markup("div",i,{className:"rendered-form"});b.parentNode.insertBefore(n,b.nextSibling),b.style.display="none",b.setAttribute("disabled","disabled")}k.length&&(h(k),f.notify.success(f.label.formRendered))}else c.markup=i.map(function(a){return a.innerHTML}).join("");return c}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a){var b=function(b,c){var d={theme:"fresh",labels:{off:"Off",on:"On"}},e=a.extend(d,c),f=a('<div class="kc-toggle"/>').insertAfter(b).append(b);f.toggleClass("on",b.is(":checked"));var g='<div class="kct-on">'+e.labels.on+"</div>",h='<div class="kct-off">'+e.labels.off+"</div>",i='<div class="kct-handle"></div>',j='<div class="kct-inner">'+g+i+h+"</div>";f.append(j),f.click(function(){b.attr("checked",!b.attr("checked")),a(this).toggleClass("on")})};a.fn.kcToggle=function(c){var d=this;return d.each(function(){var d=a(this);if(!d.data("kcToggle")){var e=new b(d,c);d.data("kcToggle",e)}})}}(jQuery),function(a){var b=function(b,c){var d=this,e={controlPosition:"right",controlOrder:["autocomplete","button","checkbox","checkbox-group","date","file","header","hidden","paragraph","number","radio-group","select","text","textarea"],dataType:"xml",disableFields:[],editOnAdd:!1,append:!1,prepend:!1,defaultFields:[],fieldRemoveWarn:!1,roles:{1:"Administrator"},messages:{addOption:"Add Option",allFieldsRemoved:"All fields were removed.",allowSelect:"Allow Select",allowMultipleFiles:"Allow users to upload multiple files",autocomplete:"Autocomplete",button:"Button",cannotBeEmpty:"This field cannot be empty",checkboxGroup:"Checkbox Group",checkbox:"Checkbox",checkboxes:"Checkboxes",className:"Class",clearAllMessage:"Are you sure you want to clear all fields?",clearAll:"Clear",close:"Close",content:"Content",copy:"Copy To Clipboard",dateField:"Date Field",description:"Help Text",descriptionField:"Description",devMode:"Developer Mode",editNames:"Edit Names",editorTitle:"Form Elements",editXML:"Edit XML",enableOther:"Enable &quot;Other&quot;",enableOtherMsg:"Let users to enter an unlisted option",fieldDeleteWarning:!1,fieldVars:"Field Variables",fieldNonEditable:"This field cannot be edited.",fieldRemoveWarning:"Are you sure you want to remove this field?",fileUpload:"File Upload",formUpdated:"Form Updated",getStarted:"Drag a field from the right to this area",header:"Header",hide:"Edit",hidden:"Hidden Input",label:"Label",labelEmpty:"Field Label cannot be empty",limitRole:"Limit access to one or more of the following roles:",mandatory:"Mandatory",maxlength:"Max Length",minOptionMessage:"This field requires a minimum of 2 options",multipleFiles:"Multiple Files",name:"Name",no:"No",number:"Number",off:"Off",on:"On",option:"Option",optional:"optional",optionLabelPlaceholder:"Label",optionValuePlaceholder:"Value",optionEmpty:"Option value required",other:"Other",paragraph:"Paragraph",placeholder:"Placeholder",placeholders:{value:"Value",label:"Label",text:"",textarea:"",email:"Enter you email",placeholder:"",className:"space separated classes",password:"Enter your password"},preview:"Preview",radioGroup:"Radio Group",radio:"Radio",removeMessage:"Remove Element",remove:"&#215;",required:"Required",richText:"Rich Text Editor",roles:"Access",save:"Save",selectOptions:"Options",select:"Select",selectColor:"Select Color",selectionsMessage:"Allow Multiple Selections",size:"Size",sizes:{xs:"Extra Small",sm:"Small",m:"Default",lg:"Large"},style:"Style",styles:{btn:{default:"Default",danger:"Danger",info:"Info",primary:"Primary",success:"Success",warning:"Warning"}},subtype:"Type",subtypes:{text:["text","password","email","color"],button:["button","submit"],header:["h1","h2","h3"],paragraph:["p","address","blockquote","canvas","output"]},text:"Text Field",textArea:"Text Area",toggle:"Toggle",warning:"Warning!",value:"Value",viewXML:"&lt;/&gt;",yes:"Yes"},notify:{error:function(a){return console.error(a)},success:function(a){return console.log(a)},warning:function(a){return console.warn(a)}},sortableControls:!1,stickyControls:!1,prefix:"form-builder-"};e.messages.subtypes.password=e.messages.subtypes.text,e.messages.subtypes.email=e.messages.subtypes.text,e.messages.subtypes.color=e.messages.subtypes.text,e.messages.subtypes.submit=e.messages.subtypes.button;var f=a.extend(!0,e,b),g=a(c),h="frmb-"+a("ul[id^=frmb-]").length++;f.formID=h,d.element=c;var i=a("<ul/>").attr("id",h).addClass("frmb"),j=formBuilderHelpersFn(f,d);d.layout=j.editorLayout(f.controlPosition);var k=h+"-fld-1",l=h+"-control-box",m=[{label:f.messages.textArea,attrs:{type:"textarea",className:"text-area",name:"textarea"}},{label:f.messages.text,attrs:{type:"text",className:"text-input",name:"text-input"}},{label:f.messages.select,attrs:{type:"select",className:"select",name:"select"}},{label:f.messages.radioGroup,attrs:{type:"radio-group",className:"radio-group",name:"radio-group"}},{label:f.messages.paragraph,attrs:{type:"paragraph",className:"paragraph"}},{label:f.messages.number,attrs:{type:"number",className:"numbers",name:"number"}},{label:f.messages.hidden,attrs:{type:"hidden",className:"hidden-input",name:"hidden-input"}},{label:f.messages.header,attrs:{type:"header",className:"header"}},{label:f.messages.fileUpload,attrs:{type:"file",className:"file-input",name:"file-input"}},{label:f.messages.dateField,attrs:{type:"date",className:"calendar",name:"date-input"}},{label:f.messages.checkboxGroup,attrs:{type:"checkbox-group",className:"checkbox-group",name:"checkbox-group"}},{label:f.messages.checkbox,attrs:{type:"checkbox",className:"checkbox",name:"checkbox"}},{label:f.messages.button,attrs:{type:"button",className:"button-input",name:"button"}},{label:f.messages.autocomplete,attrs:{type:"autocomplete",className:"autocomplete icon-text-input",name:"autocomplete"}}];m=j.orderFields(m),f.disableFields&&(m=m.filter(function(a){return!j.inArray(a.attrs.type,f.disableFields)}));var n=j.markup("ul",null,{id:l,className:"frmb-control"});f.sortableControls&&n.classList.add("sort-enabled");for(var o=a(n),p=m.length-1;p>=0;p--){var q=a("<li/>",{class:"icon-"+m[p].attrs.className,type:m[p].type,name:m[p].className,label:m[p].label});q.data("newFieldData",m[p]);var r=j.markup("span",m[p].label);q.html(r).appendTo(o)}var s="xml"===f.dataType?f.messages.viewXML:f.messages.viewJSON,t=j.markup("button",s,{id:h+"-view-data",type:"button",className:"view-data btn btn-default"}),u=j.markup("button",f.messages.clearAll,{id:h+"-clear-all",type:"button",className:"clear-all btn btn-default"}),w=(j.markup("button",f.messages.save,{className:"btn btn-primary "+f.prefix+"save",id:h+"-save",type:"button"}),j.markup("div",[u,t],{className:"form-actions btn-group"}).outerHTML);i.sortable({cursor:"move",opacity:.9,revert:150,beforeStop:j.beforeStop,start:j.startMoving,stop:j.stopMoving,cancel:"input, select, .disabled, .form-group, .btn",placeholder:"frmb-placeholder"}),o.sortable({helper:"clone",opacity:.9,connectWith:i,cursor:"move",scroll:!1,placeholder:"ui-state-highlight",start:j.startMoving,stop:j.stopMoving,revert:150,beforeStop:j.beforeStop,distance:3,update:function(a,b){return!j.doCancel&&(a=a,void(b.item.parent()[0]===i[0]?(C(b.item,!0),j.doCancel=!0):(j.setFieldOrder(o),j.doCancel=!f.sortableControls)))}});var x=a("<div/>",{id:h+"-stage-wrap",class:"stage-wrap "+d.layout.stage}),y=a("<div/>",{id:h+"-form-wrap",class:"form-wrap form-builder"+j.mobileClass()});g.before(x).appendTo(x);var z=a("<div/>",{id:h+"-cb-wrap",class:"cb-wrap "+d.layout.controls}).append(o[0],w);x.append(i,z),x.before(y),y.append(x,z);var A=j.debounce(function(b){if(b&&"keyup"===b.type&&"className"===this.name)return!1;var c=a(this).parents(".form-field:eq(0)");j.updatePreview(c),j.save()});i.on("change blur keyup",".form-elements input, .form-elements select, .form-elements textarea",A),a("li",o).click(function(){j.stopIndex=void 0,C(a(this),!0),j.save()});var B=function(){var b=[];if(f.prepend&&!a(".disabled.prepend",i).length){var c=j.markup("li",f.prepend,{className:"disabled prepend"});b.push(!0),i.prepend(c)}if(f.append&&!a(".disabled.append",i).length){var d=j.markup("li",f.append,{className:"disabled append"});b.push(!0),i.append(d)}b.some(function(a){return a===!0})&&x.removeClass("empty")},C=function(b){var c=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],d={};if(b instanceof jQuery){var e=b.data("newFieldData");if(e)d=e.attrs,d.label=e.label;else{var f=b[0].attributes;c||(d.values=b.children().map(function(b,c){return b=b,{label:a(c).text(),value:a(c).attr("value"),selected:Boolean(a(c).attr("selected"))}}));for(var g=f.length-1;g>=0;g--)d[f[g].name]=f[g].value}}else d=b;d.name=c?F(d):d.name,d.className=d.className||d.class;var h=/(?:^|\s)btn-(.*?)(?:\s|$)/g.exec(d.className);h&&(d.style=h[1]),j.escapeAttrs(d),O(d),x.removeClass("empty")},D=function(){var b="";b=d.formData?d.formData:""!==g.val()&&a.parseXML(d.element.value.trim());var c=a(b).find("field");if(c.length>0)d.formData=b,c.each(function(){C(a(this))});else if(!b)if(f.defaultFields&&f.defaultFields.length){f.defaultFields.reverse();for(var e=f.defaultFields.length-1;e>=0;e--)C(f.defaultFields[e]);x.removeClass("empty"),j.save()}else f.prepend||f.append||x.addClass("empty").attr("data-content",f.messages.getStarted);a("li.form-field:not(.disabled)",i).each(function(){j.updatePreview(a(this))}),B()},E=function(){var a={xml:D,json:function(){console.log("coming soon")}};a[f.dataType]()};i.on("mousemove","li.disabled",function(b){a(".frmb-tt",this).css({left:b.offsetX-16,top:b.offsetY-34})}),i.on("mouseenter","li.disabled",function(){j.disabledTT.add(a(this))}),i.on("mouseleave","li.disabled",function(){j.disabledTT.remove(a(this))});var F=function(a){var b=(new Date).getTime();return a.type+"-"+b},G=function a(b){var c=j.markup("a",f.messages.addOption,{className:"add add-opt"}),a="";if(b.values&&b.values.length||(b.values=[{selected:!0},{selected:!1}],b.values=b.values.map(function(a,b){return a.label=f.messages.option+" "+(b+1),a.value=j.hyphenCase(a.label),a})),a+='<label class="false-label">'+f.messages.selectOptions+"</label>",a+='<div class="sortable-options-wrap">',"select"===b.type){var d={second:f.messages.selectionsMessage};a+=I("multiple",b,d)}for(a+='<ol class="sortable-options">',p=0;p<b.values.length;p++)a+=P(b.name,b.values[p],b.multiple);return a+="</ol>",a+=j.markup("div",c,{className:"option-actions"}).outerHTML,a+="</div>",j.markup("div",a,{className:"form-group field-options"}).outerHTML},H=function a(b){var c,a=[],d="",e=["select","checkbox-group","radio-group"],g=function(){return-1!==e.indexOf(b.type)}(),h=function(){var a=["header","paragraph","file"].concat(e,f.messages.subtypes.header,f.messages.subtypes.paragraph);return-1===a.indexOf(b.type)}(),i=void 0!==b.role?b.role.split(","):[];a.push(N(b)),"checkbox"===b.type&&a.push(I("toggle",b,{first:f.messages.toggle})),a.push(M("label",b)),b.size=b.size||"m",b.style=b.style||"default";var l=["header","paragraph","button"].concat(f.messages.subtypes.header,f.messages.subtypes.paragraph);if(l=l.concat(f.messages.subtypes.header,f.messages.subtypes.paragraph),-1===l.indexOf(b.type)&&a.push(M("description",b)),a.push(J(b)),"button"===b.type&&a.push(K(b.style,b.type)),"number"===b.type&&(a.push(L("min",b)),a.push(L("max",b)),a.push(L("step",b))),a.push(M("placeholder",b)),a.push(M("className",b)),a.push(M("name",b)),h&&a.push(M("value",b)),"file"===b.type){var m={first:f.messages.multipleFiles,second:f.messages.allowMultipleFiles};a.push(I("multiple",b,m))}a.push('<div class="form-group access-wrap"><label>'+f.messages.roles+"</label>"),
a.push('<input type="checkbox" class="fld-enable-roles" name="enable-roles" value="" '+(void 0!==b.role?"checked":"")+' id="enable-roles-'+k+'"/> <label for="enable-roles-'+k+'" class="roles-label">'+f.messages.limitRole+"</label>"),a.push('<div class="available-roles" '+(void 0!==b.role?'style="display:block"':"")+">");for(c in f.roles)f.roles.hasOwnProperty(c)&&(d=j.inArray(c,i)?"checked":"",a.push('<input type="checkbox" name="roles[]" value="'+c+'" id="fld-'+k+"-roles-"+c+'" '+d+' class="roles-field" /><label for="fld-'+k+"-roles-"+c+'">'+f.roles[c]+"</label><br/>"));return a.push("</div></div>"),"checkbox-group"!==b.type&&"radio-group"!==b.type||(a.push('<div class="form-group other-wrap"><label>'+f.messages.enableOther+"</label>"),a.push('<input type="checkbox" class="fld-enable-other" name="enable-other" value="" '+(void 0!==b.other?"checked":"")+' id="enable-other-'+k+'"/> <label for="enable-other-'+k+'" class="other-label">'+f.messages.enableOtherMsg+"</label></div>")),g&&a.push(G(b)),a.push(M("maxlength",b)),a.join("")},I=function(a,b,c){var d=function(b){return'<label for="'+a+"-"+k+'">'+b+"</label>"},e=void 0!==b[a]?"checked":"",f='<input type="checkbox" class="fld-'+a+'" name="'+a+'" value="true" '+e+' id="'+a+"-"+k+'"/>',g=[f];return c.first&&g.unshift(d(c.first)),c.second&&g.push(d(c.second)),'<div class="form-group '+a+'-wrap">'+g.join("")+"</div>"},J=function a(b){var c=f.messages.subtypes,d=b.type,e=b.subtype||"",a="",g=void 0;if(c[d]){var h="<label>"+f.messages.subtype+"</label>";a+='<select name="subtype" class="fld-subtype frm-control" id="subtype-'+k+'">',c[d].forEach(function(b){g=e===b?"selected":"",a+='<option value="'+b+'" '+g+">"+b+"</option>"}),a+="</select>",a='<div class="form-group subtype-wrap">'+h+" "+a+"</div>"}return a},K=function(a,b){var c={button:"btn"},d=f.messages.styles[c[b]],e="";if(d){var g="<label>"+f.messages.style+"</label>";e+='<input value="'+a+'" name="style" type="hidden" class="btn-style">',e+='<div class="btn-group" role="group">',Object.keys(f.messages.styles[c[b]]).forEach(function(d){var g=a===d?"active":"";e+='<button value="'+d+'" type="'+b+'" class="'+g+" btn-xs "+c[b]+" "+c[b]+"-"+d+'">'+f.messages.styles[c[b]][d]+"</button>"}),e+="</div>",e='<div class="form-group style-wrap">'+g+" "+e+"</div>"}return e},L=function a(b,c){var d=c[b]||"",e=f.messages[b]||b,g=f.messages.placeholders[b]||"",a='<input type="number" value="'+d+'" name="'+b+'" placeholder="'+g+'" class="fld-'+b+' frm-control" id="'+b+"-"+k+'">';return'<div class="form-group '+b+'-wrap"><label for="'+b+"-"+k+'">'+e+"</label> "+a+"</div>"},M=function(a,b){var c=["text","textarea","select"],d=["header"],e=["paragraph"],g=["checkbox","select","checkbox-group","date","autocomplete","radio-group","hidden","button","header","number"],h=b[a]||"",i=f.messages[a];"label"===a&&j.inArray(b.type,e)&&(i=f.messages.content),d=d.concat(f.messages.subtypes.header,e),g=g.concat(e);var l=f.messages.placeholders,m=l[a]||"",n="",o=[];if("placeholder"!==a||j.inArray(b.type,c)||o.push(!0),"name"===a&&j.inArray(b.type,d)&&o.push(!0),"maxlength"===a&&j.inArray(b.type,g)&&o.push(!0),!o.some(function(a){return a===!0})){var p='<label for="'+a+"-"+k+'">'+i+"</label>";n+="label"===a&&j.inArray(b.type,e)||"value"===a&&"textarea"===b.type?'<textarea name="'+a+'" placeholder="'+m+'" class="fld-'+a+' frm-control" id="'+a+"-"+k+'">'+h+"</textarea>":'<input type="text" value="'+h+'" name="'+a+'" placeholder="'+m+'" class="fld-'+a+' frm-control" id="'+a+"-"+k+'">',n='<div class="form-group '+a+'-wrap">'+p+" "+n+"</div>"}return n},N=function(a){var b=["header","paragraph","button"],c=[],d="";return j.inArray(a.type,b)&&c.push(!0),c.some(function(a){return a===!0})||(d=I("required",a,{first:f.messages.required})),d},O=function(b){var c=b.type||"text",d=b.label||f.messages[c]||f.messages.label,e=j.markup("a",f.messages.remove,{id:"del_"+k,className:"del-button btn delete-confirm",title:f.messages.removeMessage}),g=j.markup("a",null,{id:k+"-edit",className:"toggle-form btn icon-pencil1",title:f.messages.hide}),h=j.markup("div",[g,e],{className:"field-actions"}).outerHTML;h+='<label class="field-label">'+d+"</label>",b.description&&(h+='<span class="tooltip-element" tooltip="'+b.description+'">?</span>');var l=b.required?'style="display:inline"':"";h+='<span class="required-asterisk" '+l+"> *</span>",h+=j.markup("div","",{className:"prev-holder"}).outerHTML,h+='<div id="'+k+'-holder" class="frm-holder">',h+='<div class="form-elements">',h+=H(b),h+=j.markup("a",f.messages.close,{className:"close-field"}).outerHTML,h+="</div>",h+="</div>";var m=j.markup("li",h,{class:c+"-field form-field",type:c,id:k}),n=a(m);n.data("fieldData",{attrs:b}),"undefined"!=typeof j.stopIndex?a("> li",i).eq(j.stopIndex).after(n):i.append(n),a(".sortable-options",n).sortable(),j.updatePreview(n),f.editOnAdd&&(j.closeAllEdit(i),j.toggleEdit(k)),k=j.incrementId(k)},P=function(a,b,c){var d={selected:c?"checkbox":"radio"},e=["value","label","selected"],g=[];b=b||{selected:!1,label:"",value:""};for(var h=e.length-1;h>=0;h--){var i=e[h];if(b.hasOwnProperty(i)){var k={type:d[i]||"text",class:"option-"+i,placeholder:f.messages.placeholders[i],value:b[i],name:a};"selected"===i&&(k.checked=b.selected),g.push(j.markup("input",null,k))}}var l={className:"remove btn",title:f.messages.removeMessage};g.push(j.markup("a",f.messages.remove,l));var m=j.markup("li",g);return m.outerHTML};i.on("click touchstart",".remove",function(b){var c=a(this).parents(".form-field:eq(0)");b.preventDefault();var d=a(this).parents(".sortable-options:eq(0)").children("li").length;2>=d?f.notify.error("Error: "+f.messages.minOptionMessage):a(this).parent("li").slideUp("250",function(){a(this).remove(),j.updatePreview(c),j.save()})}),i.on("touchstart","input",function(b){if(b.handled===!0)return!1;if("checkbox"===a(this).attr("type"))a(this).trigger("click");else{a(this).focus();var c=a(this).val();a(this).val(c)}}),i.on("click touchstart",".toggle-form, .close-field",function(b){if(b.stopPropagation(),b.preventDefault(),b.handled===!0)return!1;var c=a(this).parents(".form-field:eq(0)").attr("id");j.toggleEdit(c),b.handled=!0}),i.on("keyup change",'[name="label"]',function(){a(".field-label",a(this).closest("li")).text(a(this).val())}),i.delegate("input.error","keyup",function(){a(this).removeClass("error")}),i.on("keyup",'input[name="description"]',function(){var b=a(this).parents(".form-field:eq(0)"),c=a(".tooltip-element",b),d=a(this).val();if(""!==d)if(c.length)c.attr("tooltip",d).css("display","inline-block");else{var e='<span class="tooltip-element" tooltip="'+d+'">?</span>';a(".field-label",b).after(e)}else c.length&&c.css("display","none")}),j.updateMultipleSelect(),i.delegate('input[name="name"]',"blur",function(){a(this).val(j.safename(a(this).val())),""===a(this).val()?a(this).addClass("field_error").attr("placeholder",f.messages.cannotBeEmpty):a(this).removeClass("field_error")}),i.delegate("input.fld-maxlength","blur",function(){a(this).val(j.forceNumber(a(this).val()))}),i.on("click touchstart",".delete-confirm",function(b){b.preventDefault();var c=this.getBoundingClientRect(),d=document.body.getBoundingClientRect(),e={pageX:c.left+c.width/2,pageY:c.top-d.top-12},g=a(this).parents(".form-field:eq(0)").attr("id"),h=a(document.getElementById(g)),k=function(){h.slideUp(250,function(){h.removeClass("deleting"),h.remove(),j.save(),i[0].childNodes.length||x.addClass("empty").attr("data-content",f.messages.getStarted)})};if(document.addEventListener("modalClosed",function(){h.removeClass("deleting")},!1),f.fieldRemoveWarn){var l=j.markup("h3",f.messages.warning),m=j.markup("p",f.messages.fieldRemoveWarning);j.confirm([l,m],k,e),h.addClass("deleting")}else k(h)}),i.on("click",".style-wrap button",function(){var b=a(this).val(),c=a(this).parent(),d=c.prev(".btn-style");d.val(b),a(this).siblings(".btn").removeClass("active"),a(this).addClass("active"),A.call(c)}),i.on("click","input.fld-required",function(){var b=a(this).parents("li.form-field").find(".required-asterisk");b.toggle()}),i.on("click",'input[name="enable-roles"]',function(){var b=a(this).siblings("div.available-roles"),c=a(this);b.slideToggle(250,function(){c.is(":checked")||a('input[type="checkbox"]',b).removeAttr("checked")})}),i.on("click",".add-opt",function(b){b.preventDefault();var c=a(this).parents(".field-options:eq(0)"),d=a('[name="multiple"]',c),e=a(".option-selected:eq(0)",c),f=!1;f=d.length?d.prop("checked"):"checkbox"===e.attr("type");var g=e.attr("name");a(".sortable-options",c).append(P(g,!1,f)),j.updateMultipleSelect()}),i.on("mouseover mouseout",".remove, .del-button",function(){a(this).parents("li:eq(0)").toggleClass("delete")});var Q=a(document.getElementById(h+"-view-data"));Q.click(function(a){a.preventDefault();var b=j.htmlEncode(g.val()),c=j.markup("code",b,{className:"xml"}),d=j.markup("pre",c);j.dialog(d,null,"data-dialog")});var R=a(document.getElementById(h+"-clear-all"));return R.click(function(){var b=a("li.form-field"),c=this.getBoundingClientRect(),d=document.body.getBoundingClientRect(),e={pageX:c.left+c.width/2,pageY:c.top-d.top-12};b.length?j.confirm(f.messages.clearAllMessage,function(){j.removeAllfields(),f.notify.success(f.messages.allFieldsRemoved),j.save()},e):j.dialog("There are no fields to clear",{pageX:e.pageX,pageY:e.pageY})}),a(document.getElementById(h+"-save")).click(function(a){a.preventDefault(),j.save(),j.validateForm(a)}),g.parent().find('p[id*="ideaTemplate"]').remove(),g.wrap('<div class="template-textarea-wrap"/>'),E(),i.css("min-height",o.height()),f.stickyControls&&j.stickyControls(i,n),document.dispatchEvent(d.events.loaded),d.actions={clearFields:j.removeAllfields,save:j.save},d};a.fn.formBuilder=function(c){return this.each(function(){var d,e=this;if(a(e).data("formBuilder")){var f=a(e).parents(".form-builder:eq(0)");f.before(e),f.remove()}d=new b(c,e),a(e).data("formBuilder",d)})}}(jQuery),function(a){a.fn.toXML=function(b){var c="",d=function(c){var d=[];return a(".sortable-options li",c).each(function(){var c=a(this),e={value:a(".option-value",c).val(),selected:a(".option-selected",c).is(":checked")},f=b.markup("option",a(".option-label",c).val(),e).outerHTML;d.push("\n\t\t\t"+f)}),d.join("")+"\n\t\t"};return this.each(function(){var e=this;e.childNodes.length>=1&&(c+="<form-template>\n\t<fields>",b.forEach(e.childNodes,function(e,f){e=e;var g=a(f);if(!g.hasClass("disabled")){var h,i,j,k,l;!function(){h=a(".roles-field:checked",f).map(function(){return this.value}).get(),i=a('[name="enable-other"]:checked',f).length;var e=b.getTypes(g);a('[class*="fld-"]',f).each(function(){var a=b.camelCase(this.name);e[a]="checkbox"===this.type?this.checked:this.value}),h.length&&(e.role=h.join(",")),i&&(e.other="true"),e=b.trimObj(e),e=b.escapeAttrs(e),j=e.type.match(/(select|checkbox-group|radio-group)/),k="",j&&(k=d(g)),l=b.markup("field",k,e),c+="\n\t\t"+l.outerHTML}()}}),c+="\n\t</fields>\n</form-template>")}),c}}(jQuery),"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),"function"!=typeof Event&&!function(){window.Event=function(a){var b=document.createEvent("Event");return b.initEvent(a,!0,!0),b}}(),!function(a){var b=function(b,c){var d={theme:"fresh",labels:{off:"Off",on:"On"}},e=a.extend(d,c),f=a('<div class="kc-toggle"/>').insertAfter(b).append(b);f.toggleClass("on",b.is(":checked"));var g='<div class="kct-on">'+e.labels.on+"</div>",h='<div class="kct-off">'+e.labels.off+"</div>",i='<div class="kct-handle"></div>',j='<div class="kct-inner">'+g+i+h+"</div>";f.append(j),f.click(function(){b.attr("checked",!b.attr("checked")),a(this).toggleClass("on")})};a.fn.kcToggle=function(c){var d=this;return d.each(function(){var d=a(this);if(!d.data("kcToggle")){var e=new b(d,c);d.data("kcToggle",e)}})}}(jQuery);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a){a.fn.formRender=function(a){this.each(function(){var b=new FormRenderFn(a,this);return b})}}(jQuery),jQuery(document).ready(function(a){var b=document.getElementById("fb-template"),c=a(document.querySelector(".build-wrap")),d=document.querySelector(".render-wrap"),e=!0,f=function(){document.body.classList.toggle("editing-form",e),c.toggle(),a(d).toggle(),e=!e};a(b).formBuilder(),a(".form-builder-save").click(function(){f(),a(b).formRender({container:d})})});